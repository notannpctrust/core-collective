<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>Your Cart | Core Collective</title>
  </head>

  <body class="bg-blue-50 text-gray-800 font-sans min-h-screen">

    {% include 'navbar.html.jinja' %}

    <main class="max-w-6xl mx-auto p-6 space-y-6">

      <h1 class="text-3xl font-bold text-blue-700">Your Cart</h1>

      {% for x in cart %}
        <div class="bg-white rounded-2xl shadow p-4 flex flex-col md:flex-row items-center justify-between gap-4">

          <!-- Product Image -->
          <div class="flex-shrink-0">
            <img src="{{ x['Image'] }}" alt="{{ x['Name'] }}" class="w-24 h-24 object-cover rounded-xl border border-blue-200">
          </div>

          <!-- Product Name -->
          <div class="flex-1 font-semibold text-gray-800">{{ x['Name'] }}</div>

          <!-- Quantity -->
          <div class="flex items-center gap-2">
            <form method="post" action="/cart/{{ x['ProductID'] }}/update_qty">
              <input
                type="number"
                name="qty"
                value="{{ x['Quantity'] }}"
                min="1"
                class="w-20 border border-blue-200 rounded-xl px-3 py-1 text-center focus:ring-2 focus:ring-blue-400 focus:outline-none"
              >
            </form>
          </div>

          <!-- Price -->
          <div class="font-semibold text-gray-700">${{ x['Price'] }}</div>

          <!-- Total -->
          <div class="font-bold text-gray-900">${{ x['Price'] * x['Quantity'] }}</div>

          <!-- Remove Button -->
          <div>
            <form method="post" action="/cart/{{ x['ProductID'] }}/remove">
              <button type="submit" class="text-red-600 hover:underline font-semibold">Remove</button>
            </form>
          </div>

        </div>
      {% else %}
        <p class="text-gray-500 text-center py-8">Your cart is empty.</p>
      {% endfor %}

      <!-- Checkout Button -->
      {% if cart %}
        <div class="flex justify-end mt-6">
          <a href="/checkout"
             class="bg-indigo-600 text-white px-6 py-3 rounded-2xl font-bold shadow hover:bg-indigo-700 transition">
            Proceed to Checkout
          </a>
        </div>
      {% endif %}

    </main>

  </body>
</html>
